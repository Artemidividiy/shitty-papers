open shortest path first

иерархический
есть деление на зоны
метрику определяет на основе пропускной способности
$$
M = \frac{100мбит/c}{проп. сп.}
$$
формат ![OSPF Packet Format - NE40E-M2 V800R010C10SPC500 Feature Description - IP  Routing 01 - Huawei](https://download.huawei.com/mdl/image/download?uuid=5ca5896ee7334ad08a6d1d99b612bcd8)
224.0.0.5 - адрес назначения всех назначений ospf
#### версия
* для ipv4 - 2 версия
* для ipv6 - 3 версия
#### тип
определяет функционал сообщения 
1 тип - Hello 
	Eдинственное сообщение, которое рассылается на регулярной основе (каждые 5 секунд). Сообщает маршрутизаторам, что хост работоспособен. У устройств есть таймер ожидания рассылки
2 тип - database description 
	описание топологической базы данных. Рассылается по запросу
3 тип - link state request 
	запросить базу данных или запросить раздачи на регулярной основе нет и поэтому мы запрашиваем актуальное состояние системы
4 тип - link state update 
	если получаем информацию о конкретном линке. Также будет отправлен на триггерной основе в случае изменения состояния линка.
5 тип - link state acknowledgement 
очень редкий функционал для протокола маршрутизации. Отправляется при получении топологической бд 
Длина сообщения
чтобы определить сколько мы отправляем 
длина маршрутизатора выглядит как ip 
позволяет определить, кто в линке dr и bdr
dr - назначенный маршрутизатор designated router 
bdr - резервный backup designated router
бывают топологии, когда несколько маршрутизаторов смотрят в одну точку. Мы запрашиваем топологию и только главный отправит топологию. Главный роутер отпределяется по ip. Loop back - логический интерфейс, который создает
контрольная сумма - ищем ошибки
тип аутентификации
1 тип - никакой. Следующие два поля - пустые
2 тип - открытым текстом. На маршрутизаторе создаем пароль на процесс ospf.
3 тип - md5. Создаем пароль на маршрутизаторе. Такой же пароль на отправляемом тексте.
в сети возвращается только адреса прямых потомков, а не вообще всех


![[pr.png]]
первый хост скажет только про 10.2../16 . Второй только про 10.3../16
дикая маска - используется при преобразовании прямых. Можно чередовать 0 и 1 в такой маске
там где 0 в маске - важно
там где 1 в маске - не важно

в ospf мы допустим хотим сообщить о каких нетворках хотим сообщить
напишем тогда такую маске 0.0.255.255 (можно сказать, что это маска-подусловие)
как сделать дыру в безопасности: 
255.255.255.255 - это использовать нельзя ни при каких обстоятельствах
